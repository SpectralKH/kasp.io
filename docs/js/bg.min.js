function getCanvasContainerWidth(){return document.querySelector(".canvas-container").clientWidth}function init(){camera=new THREE.PerspectiveCamera(75,getCanvasContainerWidth()/canvasHeight,1,1e4),camera.position.z=1e4,scene=new THREE.Scene,particles=new Array;for(var e=2*Math.PI,n=new THREE.SpriteCanvasMaterial({color:particleColor,program:function(n){n.beginPath(),n.arc(0,0,.5,0,e,!0),n.fill()}}),a=0,i=0;i<AMOUNTX;i++)for(var t=0;t<AMOUNTY;t++)particle=particles[a++]=new THREE.Sprite(n),particle.position.x=i*SEPARATION-AMOUNTX*SEPARATION/2,particle.position.z=t*SEPARATION-AMOUNTY*SEPARATION/2,scene.add(particle);renderer=new THREE.CanvasRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(getCanvasContainerWidth(),canvasHeight),container.appendChild(renderer.domElement),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){canvasContainerWidth=getCanvasContainerWidth(),windowHalfX=canvasContainerWidth/2,windowHalfY=canvasHeight/2,camera.aspect=canvasContainerWidth/canvasHeight,camera.updateProjectionMatrix(),renderer.setSize(canvasContainerWidth,canvasHeight)}function animate(){requestAnimationFrame(animate),render()}function render(){camera.position.set(0,355,122);for(var e=0,n=0;n<AMOUNTX;n++)for(var a=0;a<AMOUNTY;a++)particle=particles[e++],particle.position.y=50*Math.sin(.3*(n+count))+50*Math.sin(.5*(a+count)),particle.scale.x=particle.scale.y=4*(Math.sin(.3*(n+count))+1)+4*(Math.sin(.5*(a+count))+1);renderer.render(scene,camera),count+=.1}var canvasHeight=400,SEPARATION=100,AMOUNTX=80,AMOUNTY=40,particleColor="#3f3f3f",container,camera,scene,renderer,particles,particle,count=0,mouseX=0,mouseY=0;container=document.createElement("div"),container.classList.add("canvas-container"),container.classList.add("hidden"),setTimeout(function(){container.classList.remove("hidden")},1e3),document.body.appendChild(container);var windowHalfX=getCanvasContainerWidth()/2,windowHalfY=canvasHeight/2;init(),animate();