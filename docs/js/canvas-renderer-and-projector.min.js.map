{"version":3,"sources":["js/canvas-renderer-and-projector.min.js"],"names":["bgColor","THREE","SpriteCanvasMaterial","e","Material","call","this","type","color","Color","program","setValues","prototype","Object","create","constructor","isSpriteCanvasMaterial","clone","copy","CanvasRenderer","i","r","t","f","opacity","d","blending","scale","x","U","o","y","q","n","Math","sqrt","ue","min","set","max","isSpriteMaterial","a","map","s","fe","id","version","c","canvas","l","image","p","width","offset","E","height","h","repeat","u","m","Z","save","translate","rotation","rotate","fillRect","restore","getStyle","v","isPointsMaterial","size","beginPath","moveTo","positionScreen","lineTo","isLineBasicMaterial","linewidth","linecap","linejoin","vertexColors","VertexColors","createLinearGradient","addColorStop","isLineDashedMaterial","dashSize","gapSize","stroke","expandByScalar","A","info","render","vertices","faces","M","C","b","z","V","j","closePath","isMeshLambertMaterial","isMeshPhongMaterial","isMeshStandardMaterial","ce","pe","emissive","FaceColors","multiply","le","me","Re","positionWorld","add","divideScalar","g","length","Ee","isDirectionalLight","xe","setFromMatrixPosition","matrixWorld","normalize","dot","intensity","multiplyScalar","isPointLight","subVectors","distance","distanceTo","normalModel","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","isMeshBasicMaterial","mapping","UVMapping","L","uvs","envMap","SphericalReflectionMapping","Te","vertexNormalsModel","applyMatrix3","ge","O","B","P","W","N","k","isMeshNormalMaterial","setRGB","addScalar","fill","CompressedTexture","DataTexture","complete","wrapS","RepeatWrapping","MirroredRepeatWrapping","wrapT","document","createElement","getContext","setTransform","drawImage","createPattern","onUpdate","R","T","S","H","w","transform","ee","globalAlpha","re","NormalBlending","globalCompositeOperation","AdditiveBlending","SubtractiveBlending","MultiplyBlending","oe","lineWidth","ne","lineCap","ae","lineJoin","te","strokeStyle","ie","fillStyle","se","setLineDash","console","log","REVISION","F","Projector","D","G","I","floor","J","K","Q","X","Y","alpha","$","_","de","Box2","he","ve","ye","Vector3","Matrix3","domElement","autoClear","sortObjects","sortElements","getContextAttributes","getPixelRatio","setPixelRatio","setSize","style","setViewport","setScissor","setScissorTest","setClearColor","setClearColorHex","warn","getClearColor","getClearAlpha","getMaxAnisotropy","clear","isEmpty","intersect","clearRect","makeEmpty","clearColor","clearDepth","clearStencil","isCamera","background","isColor","projectScene","elements","lights","getNormalMatrix","matrixWorldInverse","isAmbientLight","material","RenderableSprite","RenderableLine","v1","v2","setFromPoints","intersectsBox","RenderableFace","v3","overdraw","union","error","RenderableObject","object","renderOrder","RenderableVertex","vertexNormalsLength","Vector2","position","Vector4","visible","push","applyMatrix4","objects","abs","projectionMatrix","lerp","Box3","Array","Matrix4","Frustum","projectVector","project","unprojectVector","unproject","pickingRay","setObject","projectVertex","checkTriangleVisibility","checkBackfaceCulling","pushVertex","pushNormal","pushColor","pushUv","pushLine","fromArray","pushTriangle","side","DoubleSide","arguments","autoUpdate","updateMatrixWorld","parent","multiplyMatrices","setFromMatrix","Light","Mesh","Line","Points","frustumCulled","intersectsObject","Sprite","intersectsSprite","children","sort","geometry","BufferGeometry","attributes","groups","array","normal","uv","index","start","count","Geometry","faceVertexUvs","isArray","morphTargets","morphTargetInfluences","materialIndex","FrontSide","BackSide","negate","vertexNormals","LineSegments","colors"],"mappings":"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","file":"canvas-renderer-and-projector.min.js","sourcesContent":["var bgColor=16777215;THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type=\"SpriteCanvasMaterial\",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){function r(){me.setRGB(0,0,0),ve.setRGB(0,0,0),ye.setRGB(0,0,0);for(var e=0,r=g.length;e<r;e++){var t=g[e],i=t.color;t.isAmbientLight?me.add(i):t.isDirectionalLight?ve.add(i):t.isPointLight&&ye.add(i)}}function t(e,r,t){for(var i=0,o=g.length;i<o;i++){var n=g[i];if(Ee.copy(n.color),n.isDirectionalLight){var a=xe.setFromMatrixPosition(n.matrixWorld).normalize(),s=r.dot(a);if(s<=0)continue;s*=n.intensity,t.add(Ee.multiplyScalar(s))}else if(n.isPointLight){var a=xe.setFromMatrixPosition(n.matrixWorld),s=r.dot(xe.subVectors(a,e).normalize());if(s<=0)continue;if(0==(s*=0==n.distance?1:1-Math.min(e.distanceTo(a)/n.distance,1)))continue;s*=n.intensity,t.add(Ee.multiplyScalar(s))}}}function i(e,r,t){f(t.opacity),d(t.blending);var i=r.scale.x*U,o=r.scale.y*q,n=Math.sqrt(i*i+o*o);if(ue.min.set(e.x-n,e.y-n),ue.max.set(e.x+n,e.y+n),t.isSpriteMaterial){var a=t.map;if(null!==a){var s=fe[a.id];if(void 0!==s&&s.version===a.version||(s=c(a),fe[a.id]=s),void 0!==s.canvas){y(s.canvas);var l=a.image,p=l.width*a.offset.x,E=l.height*a.offset.y,h=l.width*a.repeat.x,u=l.height*a.repeat.y,m=i/h,x=o/u;Z.save(),Z.translate(e.x,e.y),0!==t.rotation&&Z.rotate(t.rotation),Z.translate(-i/2,-o/2),Z.scale(m,x),Z.translate(-p,-E),Z.fillRect(p,E,h,u),Z.restore()}}else y(t.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==t.rotation&&Z.rotate(t.rotation),Z.scale(i,-o),Z.fillRect(-.5,-.5,1,1),Z.restore()}else t.isSpriteCanvasMaterial?(v(t.color.getStyle()),y(t.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==t.rotation&&Z.rotate(t.rotation),Z.scale(i,o),t.program(Z),Z.restore()):t.isPointsMaterial&&(y(t.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==t.rotation&&Z.rotate(t.rotation),Z.scale(i*t.size,-o*t.size),Z.fillRect(-.5,-.5,1,1),Z.restore())}function o(e,r,t,i){if(f(i.opacity),d(i.blending),Z.beginPath(),Z.moveTo(e.positionScreen.x,e.positionScreen.y),Z.lineTo(r.positionScreen.x,r.positionScreen.y),i.isLineBasicMaterial){if(h(i.linewidth),u(i.linecap),m(i.linejoin),i.vertexColors!==THREE.VertexColors)v(i.color.getStyle());else{var o=t.vertexColors[0].getStyle(),n=t.vertexColors[1].getStyle();if(o===n)v(o);else{try{var a=Z.createLinearGradient(e.positionScreen.x,e.positionScreen.y,r.positionScreen.x,r.positionScreen.y);a.addColorStop(0,o),a.addColorStop(1,n)}catch(e){a=o}v(a)}}i.isLineDashedMaterial&&x([i.dashSize,i.gapSize]),Z.stroke(),ue.expandByScalar(2*i.linewidth),i.isLineDashedMaterial&&x([])}}function n(e,r,i,o,n,c,E,h){if(A.info.render.vertices+=3,A.info.render.faces++,f(h.opacity),d(h.blending),M=e.positionScreen.x,C=e.positionScreen.y,b=r.positionScreen.x,z=r.positionScreen.y,V=i.positionScreen.x,j=i.positionScreen.y,a(M,C,b,z,V,j),(h.isMeshLambertMaterial||h.isMeshPhongMaterial||h.isMeshStandardMaterial)&&null===h.map)ce.copy(h.color),pe.copy(h.emissive),h.vertexColors===THREE.FaceColors&&ce.multiply(E.color),le.copy(me),Re.copy(e.positionWorld).add(r.positionWorld).add(i.positionWorld).divideScalar(3),t(Re,E.normalModel,le),le.multiply(ce).add(pe),!0===h.wireframe?s(le,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(le);else if(h.isMeshBasicMaterial||h.isMeshLambertMaterial||h.isMeshPhongMaterial||h.isMeshStandardMaterial)if(null!==h.map){var u=h.map.mapping;u===THREE.UVMapping&&(L=E.uvs,p(M,C,b,z,V,j,L[o].x,L[o].y,L[n].x,L[n].y,L[c].x,L[c].y,h.map))}else null!==h.envMap?h.envMap.mapping===THREE.SphericalReflectionMapping&&(Te.copy(E.vertexNormalsModel[o]).applyMatrix3(ge),O=.5*Te.x+.5,B=.5*Te.y+.5,Te.copy(E.vertexNormalsModel[n]).applyMatrix3(ge),P=.5*Te.x+.5,W=.5*Te.y+.5,Te.copy(E.vertexNormalsModel[c]).applyMatrix3(ge),N=.5*Te.x+.5,k=.5*Te.y+.5,p(M,C,b,z,V,j,O,B,P,W,N,k,h.envMap)):(le.copy(h.color),h.vertexColors===THREE.FaceColors&&le.multiply(E.color),!0===h.wireframe?s(le,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(le));else h.isMeshNormalMaterial?(Te.copy(E.normalModel).applyMatrix3(ge),le.setRGB(Te.x,Te.y,Te.z).multiplyScalar(.5).addScalar(.5),!0===h.wireframe?s(le,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(le)):(le.setRGB(1,1,1),!0===h.wireframe?s(le,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(le))}function a(e,r,t,i,o,n){Z.beginPath(),Z.moveTo(e,r),Z.lineTo(t,i),Z.lineTo(o,n),Z.closePath()}function s(e,r,t,i){h(r),u(t),m(i),v(e.getStyle()),Z.stroke(),ue.expandByScalar(2*r)}function l(e){y(e.getStyle()),Z.fill()}function c(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var r=e.image;if(!1===r.complete)return{canvas:void 0,version:0};var t=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,o=e.wrapS===THREE.MirroredRepeatWrapping,n=e.wrapT===THREE.MirroredRepeatWrapping,a=document.createElement(\"canvas\");a.width=r.width*(o?2:1),a.height=r.height*(n?2:1);var s=a.getContext(\"2d\");s.setTransform(1,0,0,-1,0,r.height),s.drawImage(r,0,0),!0===o&&(s.setTransform(-1,0,0,-1,r.width,r.height),s.drawImage(r,-r.width,0)),!0===n&&(s.setTransform(1,0,0,1,0,0),s.drawImage(r,0,r.height)),!0===o&&!0===n&&(s.setTransform(-1,0,0,1,r.width,0),s.drawImage(r,-r.width,r.height));var l=\"no-repeat\";!0===t&&!0===i?l=\"repeat\":!0===t?l=\"repeat-x\":!0===i&&(l=\"repeat-y\");var c=Z.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function p(e,r,t,i,o,n,a,s,l,p,E,f,d){var h=fe[d.id];if(void 0!==h&&h.version===d.version||(h=c(d),fe[d.id]=h),void 0===h.canvas)return y(\"rgba( 0, 0, 0, 1)\"),void Z.fill();y(h.canvas);var u,m,v,x,R,T,g,S,H=d.offset.x/d.repeat.x,w=d.offset.y/d.repeat.y,M=d.image.width*d.repeat.x,C=d.image.height*d.repeat.y;a=(a+H)*M,s=(s+w)*C,l=(l+H)*M,p=(p+w)*C,E=(E+H)*M,f=(f+w)*C,t-=e,i-=r,o-=e,n-=r,l-=a,p-=s,E-=a,f-=s,0!==(g=l*f-E*p)&&(S=1/g,u=(f*t-p*o)*S,m=(f*i-p*n)*S,v=(l*o-E*t)*S,x=(l*n-E*i)*S,R=e-u*a-v*s,T=r-m*a-x*s,Z.save(),Z.transform(u,m,v,x,R,T),Z.fill(),Z.restore())}function E(e,r,t){var i,o=r.x-e.x,n=r.y-e.y,a=o*o+n*n;0!==a&&(i=t/Math.sqrt(a),o*=i,n*=i,r.x+=o,r.y+=n,e.x-=o,e.y-=n)}function f(e){ee!==e&&(Z.globalAlpha=e,ee=e)}function d(e){re!==e&&(e===THREE.NormalBlending?Z.globalCompositeOperation=\"source-over\":e===THREE.AdditiveBlending?Z.globalCompositeOperation=\"lighter\":e===THREE.SubtractiveBlending?Z.globalCompositeOperation=\"darker\":e===THREE.MultiplyBlending&&(Z.globalCompositeOperation=\"multiply\"),re=e)}function h(e){oe!==e&&(Z.lineWidth=e,oe=e)}function u(e){ne!==e&&(Z.lineCap=e,ne=e)}function m(e){ae!==e&&(Z.lineJoin=e,ae=e)}function v(e){te!==e&&(Z.strokeStyle=e,te=e)}function y(e){ie!==e&&(Z.fillStyle=e,ie=e)}function x(e){se.length!==e.length&&(Z.setLineDash(e),se=e)}console.log(\"THREE.CanvasRenderer\",THREE.REVISION),e=e||{};var R,T,g,S,H,w,M,C,b,z,V,j,L,O,B,P,W,N,k,A=this,F=new THREE.Projector,D=void 0!==e.canvas?e.canvas:document.createElement(\"canvas\"),G=D.width,I=D.height,U=Math.floor(G/2),q=Math.floor(I/2),J=0,K=0,Q=G,X=I,Y=1,Z=D.getContext(\"2d\",{alpha:!0===e.alpha}),$=new THREE.Color(bgColor),_=!0===e.alpha?0:1,ee=1,re=0,te=null,ie=null,oe=null,ne=null,ae=null,se=[],le=new THREE.Color,ce=new THREE.Color,pe=new THREE.Color,Ee=new THREE.Color,fe={},de=new THREE.Box2,he=new THREE.Box2,ue=new THREE.Box2,me=new THREE.Color,ve=new THREE.Color,ye=new THREE.Color,xe=new THREE.Vector3,Re=new THREE.Vector3,Te=new THREE.Vector3,ge=new THREE.Matrix3;void 0===Z.setLineDash&&(Z.setLineDash=function(){}),this.domElement=D,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e)},this.setSize=function(e,r,t){G=e*Y,I=r*Y,D.width=G,D.height=I,U=Math.floor(G/2),q=Math.floor(I/2),!1!==t&&(D.style.width=e+\"px\",D.style.height=r+\"px\"),de.min.set(-U,-q),de.max.set(U,q),he.min.set(-U,-q),he.max.set(U,q),ee=1,re=0,te=null,ie=null,oe=null,ne=null,ae=null,this.setViewport(0,0,e,r)},this.setViewport=function(e,r,t,i){J=e*Y,K=r*Y,Q=t*Y,X=i*Y},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,r){$.set(e),_=void 0!==r?r:1,he.min.set(-U,-q),he.max.set(U,q)},this.setClearColorHex=function(e,r){console.warn(\"THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.\"),this.setClearColor(e,r)},this.getClearColor=function(){return $},this.getClearAlpha=function(){return _},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===he.isEmpty()&&(he.intersect(de),he.expandByScalar(2),he.min.x=he.min.x+U,he.min.y=-he.min.y+q,he.max.x=he.max.x+U,he.max.y=-he.max.y+q,_<1&&Z.clearRect(0|he.min.x,0|he.max.y,he.max.x-he.min.x|0,he.min.y-he.max.y|0),_>0&&(f(1),d(THREE.NormalBlending),y(\"rgba(\"+Math.floor(255*$.r)+\",\"+Math.floor(255*$.g)+\",\"+Math.floor(255*$.b)+\",\"+_+\")\"),Z.fillRect(0|he.min.x,0|he.max.y,he.max.x-he.min.x|0,he.min.y-he.max.y|0)),he.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(void 0===t.isCamera)return void console.error(\"THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.\");var a=e.background;a&&a.isColor?(f(1),d(THREE.NormalBlending),y(a.getStyle()),Z.fillRect(0,0,G,I)):!0===this.autoClear&&this.clear(),A.info.render.vertices=0,A.info.render.faces=0,Z.setTransform(Q/G,0,0,-X/I,J,I-K),Z.translate(U,q),R=F.projectScene(e,t,this.sortObjects,this.sortElements),T=R.elements,g=R.lights,ge.getNormalMatrix(t.matrixWorldInverse),r();for(var s=0,l=T.length;s<l;s++){var c=T[s],p=c.material;if(void 0!==p&&0!==p.opacity){if(ue.makeEmpty(),c instanceof THREE.RenderableSprite)S=c,S.x*=U,S.y*=q,i(S,c,p);else if(c instanceof THREE.RenderableLine)S=c.v1,H=c.v2,S.positionScreen.x*=U,S.positionScreen.y*=q,H.positionScreen.x*=U,H.positionScreen.y*=q,ue.setFromPoints([S.positionScreen,H.positionScreen]),!0===de.intersectsBox(ue)&&o(S,H,c,p);else if(c instanceof THREE.RenderableFace){if(S=c.v1,H=c.v2,w=c.v3,S.positionScreen.z<-1||S.positionScreen.z>1)continue;if(H.positionScreen.z<-1||H.positionScreen.z>1)continue;if(w.positionScreen.z<-1||w.positionScreen.z>1)continue;S.positionScreen.x*=U,S.positionScreen.y*=q,H.positionScreen.x*=U,H.positionScreen.y*=q,w.positionScreen.x*=U,w.positionScreen.y*=q,p.overdraw>0&&(E(S.positionScreen,H.positionScreen,p.overdraw),E(H.positionScreen,w.positionScreen,p.overdraw),E(w.positionScreen,S.positionScreen,p.overdraw)),ue.setFromPoints([S.positionScreen,H.positionScreen,w.positionScreen]),!0===de.intersectsBox(ue)&&n(S,H,w,0,1,2,c,p)}he.union(ue)}}Z.setTransform(1,0,0,1,0,0)}},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){function e(t){if(!1!==t.visible){if(t instanceof THREE.Light)j.lights.push(t);else if(t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.Points){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===D.intersectsObject(t))return;r(t)}else if(t instanceof THREE.Sprite){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===D.intersectsSprite(t))return;r(t)}for(var i=t.children,o=0,n=i.length;o<n;o++)e(i[o])}}function r(e){p=i(),p.id=e.id,p.object=e,L.setFromMatrixPosition(e.matrixWorld),L.applyMatrix4(k),p.z=L.z,p.renderOrder=e.renderOrder,j.objects.push(p)}function t(e,r,t){var i=1/e.w;e.z*=i,e.z>=-1&&e.z<=1&&(y=s(),y.id=r.id,y.x=e.x*i,y.y=e.y*i,y.z=e.z,y.renderOrder=r.renderOrder,y.object=r,y.rotation=r.rotation,y.scale.x=r.scale.x*Math.abs(y.x-(e.x+t.projectionMatrix.elements[0])/(e.w+t.projectionMatrix.elements[12])),y.scale.y=r.scale.y*Math.abs(y.y-(e.y+t.projectionMatrix.elements[5])/(e.w+t.projectionMatrix.elements[13])),y.material=r.material,j.elements.push(y))}function i(){if(E===g){var e=new THREE.RenderableObject;return T.push(e),g++,E++,e}return T[E++]}function o(){if(d===H){var e=new THREE.RenderableVertex;return S.push(e),H++,d++,e}return S[d++]}function n(){if(u===M){var e=new THREE.RenderableFace;return w.push(e),M++,u++,e}return w[u++]}function a(){if(v===b){var e=new THREE.RenderableLine;return C.push(e),b++,v++,e}return C[v++]}function s(){if(x===V){var e=new THREE.RenderableSprite;return z.push(e),V++,x++,e}return z[x++]}function l(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id!==r.id?e.id-r.id:0}function c(e,r){var t=0,i=1,o=e.z+e.w,n=r.z+r.w,a=-e.z+e.w,s=-r.z+r.w;return o>=0&&n>=0&&a>=0&&s>=0||!(o<0&&n<0||a<0&&s<0)&&(o<0?t=Math.max(t,o/(o-n)):n<0&&(i=Math.min(i,o/(o-n))),a<0?t=Math.max(t,a/(a-s)):s<0&&(i=Math.min(i,a/(a-s))),!(i<t)&&(e.lerp(r,t),r.lerp(e,1-i),!0))}var p,E,f,d,h,u,m,v,y,x,R,T=[],g=0,S=[],H=0,w=[],M=0,C=[],b=0,z=[],V=0,j={objects:[],lights:[],elements:[]},L=new THREE.Vector3,O=new THREE.Vector4,B=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),P=new THREE.Box3,W=new Array(3),N=new THREE.Matrix4,k=new THREE.Matrix4,A=new THREE.Matrix4,F=new THREE.Matrix3,D=new THREE.Frustum,G=new THREE.Vector4,I=new THREE.Vector4;this.projectVector=function(e,r){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\"),e.project(r)},this.unprojectVector=function(e,r){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\"),e.unproject(r)},this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")};var U=function(){function e(e){T=e,g=T.material,H.getNormalMatrix(T.matrixWorld),v.length=0,y.length=0,x.length=0}function r(e){var r=e.position,t=e.positionWorld,i=e.positionScreen;t.copy(r).applyMatrix4(R),i.copy(t).applyMatrix4(k);var o=1/i.w;i.x*=o,i.y*=o,i.z*=o,e.visible=i.x>=-1&&i.x<=1&&i.y>=-1&&i.y<=1&&i.z>=-1&&i.z<=1}function t(e,t,i){f=o(),f.position.set(e,t,i),r(f)}function i(e,r,t){v.push(e,r,t)}function s(e,r,t){y.push(e,r,t)}function l(e,r){x.push(e,r)}function p(e,r,t){return!0===e.visible||!0===r.visible||!0===t.visible||(W[0]=e.positionScreen,W[1]=r.positionScreen,W[2]=t.positionScreen,B.intersectsBox(P.setFromPoints(W)))}function E(e,r,t){return(t.positionScreen.x-e.positionScreen.x)*(r.positionScreen.y-e.positionScreen.y)-(t.positionScreen.y-e.positionScreen.y)*(r.positionScreen.x-e.positionScreen.x)<0}function d(e,r){var t=S[e],i=S[r];t.positionScreen.copy(t.position).applyMatrix4(A),i.positionScreen.copy(i.position).applyMatrix4(A),!0===c(t.positionScreen,i.positionScreen)&&(t.positionScreen.multiplyScalar(1/t.positionScreen.w),i.positionScreen.multiplyScalar(1/i.positionScreen.w),m=a(),m.id=T.id,m.v1.copy(t),m.v2.copy(i),m.z=Math.max(t.positionScreen.z,i.positionScreen.z),m.renderOrder=T.renderOrder,m.material=T.material,T.material.vertexColors===THREE.VertexColors&&(m.vertexColors[0].fromArray(y,3*e),m.vertexColors[1].fromArray(y,3*r)),j.elements.push(m))}function u(e,r,t){var i=S[e],o=S[r],a=S[t];if(!1!==p(i,o,a)&&(g.side===THREE.DoubleSide||!0===E(i,o,a))){h=n(),h.id=T.id,h.v1.copy(i),h.v2.copy(o),h.v3.copy(a),h.z=(i.positionScreen.z+o.positionScreen.z+a.positionScreen.z)/3,h.renderOrder=T.renderOrder,h.normalModel.fromArray(v,3*e),h.normalModel.applyMatrix3(H).normalize();for(var s=0;s<3;s++){var l=h.vertexNormalsModel[s];l.fromArray(v,3*arguments[s]),l.applyMatrix3(H).normalize();h.uvs[s].fromArray(x,2*arguments[s])}h.vertexNormalsLength=3,h.material=T.material,j.elements.push(h)}}var v=[],y=[],x=[],T=null,g=null,H=new THREE.Matrix3;return{setObject:e,projectVertex:r,checkTriangleVisibility:p,checkBackfaceCulling:E,pushVertex:t,pushNormal:i,pushColor:s,pushUv:l,pushLine:d,pushTriangle:u}},q=new U;this.projectScene=function(r,i,s,p){u=0,v=0,x=0,j.elements.length=0,!0===r.autoUpdate&&r.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),N.copy(i.matrixWorldInverse),k.multiplyMatrices(i.projectionMatrix,N),D.setFromMatrix(k),E=0,j.objects.length=0,j.lights.length=0,e(r),!0===s&&j.objects.sort(l);for(var f=j.objects,y=0,T=f.length;y<T;y++){var g=f[y].object,H=g.geometry;if(q.setObject(g),R=g.matrixWorld,d=0,g instanceof THREE.Mesh){if(H instanceof THREE.BufferGeometry){var w=H.attributes,M=H.groups;if(void 0===w.position)continue;for(var C=w.position.array,b=0,z=C.length;b<z;b+=3)q.pushVertex(C[b],C[b+1],C[b+2]);if(void 0!==w.normal)for(var V=w.normal.array,b=0,z=V.length;b<z;b+=3)q.pushNormal(V[b],V[b+1],V[b+2]);if(void 0!==w.uv)for(var B=w.uv.array,b=0,z=B.length;b<z;b+=2)q.pushUv(B[b],B[b+1]);if(null!==H.index){var P=H.index.array;if(M.length>0)for(var W=0;W<M.length;W++)for(var U=M[W],b=U.start,z=U.start+U.count;b<z;b+=3)q.pushTriangle(P[b],P[b+1],P[b+2]);else for(var b=0,z=P.length;b<z;b+=3)q.pushTriangle(P[b],P[b+1],P[b+2])}else for(var b=0,z=C.length/3;b<z;b+=3)q.pushTriangle(b,b+1,b+2)}else if(H instanceof THREE.Geometry){var J=H.vertices,K=H.faces,Q=H.faceVertexUvs[0];F.getNormalMatrix(R);for(var X=g.material,Y=Array.isArray(X),Z=0,$=J.length;Z<$;Z++){var _=J[Z];if(L.copy(_),!0===X.morphTargets)for(var ee=H.morphTargets,re=g.morphTargetInfluences,te=0,ie=ee.length;te<ie;te++){var oe=re[te];if(0!==oe){var ne=ee[te],ae=ne.vertices[Z];L.x+=(ae.x-_.x)*oe,L.y+=(ae.y-_.y)*oe,L.z+=(ae.z-_.z)*oe}}q.pushVertex(L.x,L.y,L.z)}for(var se=0,le=K.length;se<le;se++){var ce=K[se];if(void 0!==(X=!0===Y?g.material[ce.materialIndex]:g.material)){var pe=X.side,Ee=S[ce.a],fe=S[ce.b],de=S[ce.c];if(!1!==q.checkTriangleVisibility(Ee,fe,de)){var he=q.checkBackfaceCulling(Ee,fe,de);if(pe!==THREE.DoubleSide){if(pe===THREE.FrontSide&&!1===he)continue;if(pe===THREE.BackSide&&!0===he)continue}h=n(),h.id=g.id,h.v1.copy(Ee),h.v2.copy(fe),h.v3.copy(de),h.normalModel.copy(ce.normal),!1!==he||pe!==THREE.BackSide&&pe!==THREE.DoubleSide||h.normalModel.negate(),h.normalModel.applyMatrix3(F).normalize();for(var ue=ce.vertexNormals,me=0,ve=Math.min(ue.length,3);me<ve;me++){var ye=h.vertexNormalsModel[me];ye.copy(ue[me]),!1!==he||pe!==THREE.BackSide&&pe!==THREE.DoubleSide||ye.negate(),ye.applyMatrix3(F).normalize()}h.vertexNormalsLength=ue.length;var xe=Q[se];if(void 0!==xe)for(var Re=0;Re<3;Re++)h.uvs[Re].copy(xe[Re]);h.color=ce.color,h.material=X,h.z=(Ee.positionScreen.z+fe.positionScreen.z+de.positionScreen.z)/3,h.renderOrder=g.renderOrder,j.elements.push(h)}}}}}else if(g instanceof THREE.Line){if(A.multiplyMatrices(k,R),H instanceof THREE.BufferGeometry){var w=H.attributes;if(void 0!==w.position){for(var C=w.position.array,b=0,z=C.length;b<z;b+=3)q.pushVertex(C[b],C[b+1],C[b+2]);if(void 0!==w.color)for(var Te=w.color.array,b=0,z=Te.length;b<z;b+=3)q.pushColor(Te[b],Te[b+1],Te[b+2]);if(null!==H.index)for(var P=H.index.array,b=0,z=P.length;b<z;b+=2)q.pushLine(P[b],P[b+1]);else for(var ge=g instanceof THREE.LineSegments?2:1,b=0,z=C.length/3-1;b<z;b+=ge)q.pushLine(b,b+1)}}else if(H instanceof THREE.Geometry){var J=g.geometry.vertices;if(0===J.length)continue;Ee=o(),Ee.positionScreen.copy(J[0]).applyMatrix4(A);for(var ge=g instanceof THREE.LineSegments?2:1,Z=1,$=J.length;Z<$;Z++)Ee=o(),Ee.positionScreen.copy(J[Z]).applyMatrix4(A),(Z+1)%ge>0||(fe=S[d-2],G.copy(Ee.positionScreen),I.copy(fe.positionScreen),!0===c(G,I)&&(G.multiplyScalar(1/G.w),I.multiplyScalar(1/I.w),m=a(),m.id=g.id,m.v1.positionScreen.copy(G),m.v2.positionScreen.copy(I),m.z=Math.max(G.z,I.z),m.renderOrder=g.renderOrder,m.material=g.material,g.material.vertexColors===THREE.VertexColors&&(m.vertexColors[0].copy(g.geometry.colors[Z]),m.vertexColors[1].copy(g.geometry.colors[Z-1])),j.elements.push(m)))}}else if(g instanceof THREE.Points){if(A.multiplyMatrices(k,R),H instanceof THREE.Geometry)for(var J=g.geometry.vertices,Z=0,$=J.length;Z<$;Z++){var _=J[Z];O.set(_.x,_.y,_.z,1),O.applyMatrix4(A),t(O,g,i)}else if(H instanceof THREE.BufferGeometry){var w=H.attributes;if(void 0!==w.position)for(var C=w.position.array,b=0,z=C.length;b<z;b+=3)O.set(C[b],C[b+1],C[b+2],1),O.applyMatrix4(A),t(O,g,i)}}else g instanceof THREE.Sprite&&(O.set(R.elements[12],R.elements[13],R.elements[14],1),O.applyMatrix4(k),t(O,g,i))}return!0===p&&j.elements.sort(l),j}};"]}